<!-- src/main/resources/logback-spring.xml -->
<configuration>

  <!-- record app startup time once -->
  <timestamp key="START_TIME" datePattern="yyyy.MM.dd_HH:mm:ss"/>

  <appender name="ROLLING" class="ch.qos.logback.core.rolling.RollingFileAppender">
    <rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">
      <!--
        ${START_TIME} is fixed at startup,
        %d{yyyy-MM-dd} will roll daily,
        %i will index on size‐rollovers.
      -->
      <fileNamePattern>logs/ngsweb.${START_TIME}.%d{yyyy-MM-dd}.%i.log.gz</fileNamePattern>
      <maxFileSize>10MB</maxFileSize>
      <maxHistory>30</maxHistory>
      <totalSizeCap>1GB</totalSizeCap>
    </rollingPolicy>
    <encoder>
      <pattern>%d{yyyy-MM-dd HH:mm:ss} %-5level [%thread] %logger - %msg%n</pattern>
    </encoder>
  </appender>
  
  <!-- 2. Console appender definition -->
  <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
    <encoder>
      <!-- Use a pattern of your choosing -->
      <pattern>
        %red(%d{HH:mm:ss.SSS}) %highlight(%-5level) %blue([%thread]) %cyan(%logger{36}) %white(- %msg%n)
      </pattern>
    </encoder>
  </appender>
  

  <root level="INFO">
    <appender-ref ref="CONSOLE"/>
    <appender-ref ref="ROLLING"/>
  </root>
</configuration>
